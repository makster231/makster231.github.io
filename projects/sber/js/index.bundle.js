!function(){"use strict";class e{elements;body=document.querySelector("body");constructor(e,t){this.elements={dialog:e,dialogBg:e.querySelector(".js_dialog_bg")},this.buttons={close:e.querySelector(".js_dialog_close"),open:t.openBtn},this.elements.dialog.addEventListener("close",(()=>this.closeModal())),this.elements.dialogBg.addEventListener("click",(()=>this.closeModal())),this.buttons.close.addEventListener("click",(()=>this.closeModal())),this.buttons.open.forEach((e=>{e.addEventListener("click",(()=>this.openModal()))}))}openModal(){this.elements.dialog.showModal(),body.classList.add("js_scroll-disable")}closeModal(){this.elements.dialog.close(),body.classList.remove("js_scroll-disable")}}window.addEventListener("load",(async function(){const t=document.querySelector("body"),o=document.querySelector("footer"),s=document.querySelector(".timer-bar"),l=document.querySelector("main"),n=matchMedia("(max-width: 640px)").matches;function c(e){return new Promise((t=>setTimeout(t,e)))}document.querySelectorAll(".js_add_block-link--mob").forEach((e=>{n&&e.addEventListener("click",(function(t){t.preventDefault();let o=e.dataset.href;document.location.href=o}))})),document.querySelectorAll(".accordion-container ").forEach((e=>{e.querySelector(".accordion").addEventListener("click",(function(t){e.classList.toggle("active")}))})),document.querySelector(".js_add-btn").addEventListener("click",(function(e){let t=e.target;e.target.classList.contains("js_active")?e.target.innerText="Реклама":e.target.innerHTML="Реклама. Рекламодатель АО «ЦПЛ» г. Москва ОГРН 1117746689840,&nbsp;erid&nbsp;XXXXX",t.classList.toggle("js_active")}));const r=document.querySelector(".js_dialog-samokat"),a=document.querySelector(".js_dialog-wheretoget"),i=document.querySelector(".js_dialog-afisha");r&&new e(r,{openBtn:n?[...document.querySelectorAll(".add_block")].filter((e=>e.querySelector(".js_dialog_open-1"))):document.querySelectorAll(".js_dialog_open-1")}),a&&new e(a,{openBtn:n?[...document.querySelectorAll(".add_block")].filter((e=>e.querySelector(".js_dialog_open-2"))):document.querySelectorAll(".js_dialog_open-2")}),i&&new e(i,{openBtn:n?[...document.querySelectorAll(".add_block")].filter((e=>e.querySelector(".js_dialog_open-3"))):document.querySelectorAll(".js_dialog_open-3")});const d=document.querySelector(".js_timer-bar"),u=document.querySelector(".timer-circle");function y(e){let t=3e5;const o=document.querySelectorAll(".js_time_left");let s=1,l=s/300*100,c=100-l,r=document.getElementById("c1"),a=document.getElementById("c2");s++,r.style.strokeDasharray=[c,l],a.style.strokeDasharray=[l,c],r.style.strokeDashoffset=c;const i=setInterval((()=>{t-=1e3;const e=Math.floor(t/1e3/60),d=Math.floor(t/1e3%60);o.forEach((t=>{t.innerHTML=`${n?"":"0"}${e}:${d<10?"0":""}${d}`})),t<=0&&(clearInterval(i),y(1e3)),l=s/300*100,c=100-l,r.style.strokeDasharray=[c,l],a.style.strokeDasharray=[l,c],r.style.strokeDashoffset=c,s++}),e)}new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?d.classList.remove("js_active"):d.classList.add("js_active")}))})).observe(u),t.style.opacity=1,t.classList.remove("transition-0");const m=document.querySelector(".js_section-intro"),_=document.querySelector(".js_hide-intro");m.classList.add("js_animation-fortuna"),_.addEventListener("click",(async function(e){const t=document.querySelector(".section-intro");l.style.display="unset",o.style.display="unset",t.style.opacity=0,await c(50),t.style.display="none",y(1e3),await c(50),s.style.display="unset"}));const h=document.querySelector(".js_current_year");h&&(h.innerHTML=(new Date).getFullYear())}))}();